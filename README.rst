Mass Gathering Detective System
==================================================

**Author:** Yicheng Qian, Huan Le, Hung Do, Kevin Kong
--------------------------------------------------------

The idea of this system is to detect if a mass gathering exists in a room. Nowadays, people are getting used to wearing masks at work and school. However, as the number of new coronavirus cases continues to increase rapidly, we believe that large gatherings of people will remain inappropriate until the Coronavirus has completely disappeared.

System with Multiple Subsystems
---------------------------------

The system consists of several important features to function correctly simultaneously. The system will have a subsystem that continuously keeps track of the number of people in a room, a subsystem that calculates the size of the room, and another communication subsystem embedded with all the mentioned subsystems (all subsystems will share data with one another). The statistics that are generated by each subsystem are compared to determine if mass gathering takes place at any moment.

* Humidity and Temperature may be too hard to measure and those measurements take time to change just a little, so it is hard to capture and might not be that useful.
* Another good idea is to use CO2 sensor to see if huge activity is held in a room and many people are participating. It is not guaranteed if this way returns accurate assessment.

Counting People in the Room
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Our initial thought is to use two Ultrasonic/IR sensors, one is outside the room, and another is inside the room. If the one outside the room finds the person first, then the person is entering the room. Otherwise, the person is exiting the room. This is probably the easiest part. We will firstly tackle this system.

This system will also have an alarm. It is mainly used to warn the person entering if the room is already full. 


Calculating Area of the Room
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Ultrasonic sensors can not detect distances over 8 meters. Thus we came up with another idea, which is to place the system at the corner of the room to measure the width and length of the room and then calculate the area of the room. We can use two laser sensors or we can rotate just one to measure the size of the room.

If we are going to use rotation, we should think about how to mount the sensor to the servo motor so that they can rotate together. It is very likely we will take this approach because the laser sensor is expensive. We should consider how we mount the sensor onto the servo motor.

We are not sure about if the laser sensor could detect the white wall or not, so this part becomes a little bit tricky.

The occupancy load is calculated by dividing the area of a room by its prescribed unit of area per person. We could define the unit of area per person by following an appropriate social distancing. We hope this unit of area can be changed remotely through Bluetooth by sending from phones if we have time.

Sharing Data through Multiple Subsystems
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Choice 1: Multiple Arduinos/RPIs communicate with each other using nRF. We can use various types of communication modules like Bluetooth module, nRF24L01, etc. For this problem, we can effectively use nRF. And we can set which one is the parent and which all are children. A single unit can receive from 6 other modules and vice versa.

With the following two choices, we can possibly build a Web App to monitor data if we have time.

Choice 2: ESP8266 WiFi module 

Choice 3: Bluno Bee BLE Bluetooth module (We will take this approach, it looks like this module has a larger range). With this approach, the two main systems could communicate with each other. We also hope we can use our phones to send data to the room size measure system to change the setting (such as unit of area). In a low risk area, we could decrease the unit of area to increase the occupancy load, increasing the amount of people we could have in a room. 


Cost
---------------------------------
The cost of building this system is waiting to be calculated.

* Arudino Uno Rev3 x 2 (ready for use)
* Sharp GP2Y0A21YK0F GP2Y0A21 80 cm Infrared Proximity Sensor x 2: $18 (two used for calculating the number of people in a room) (May be substituted by 2 Ultrasonic Sensors which are ready for use)
* Infrared Laser Distance Sensor (50m / 80m) x 1: $70 https://www.dfrobot.com/product-2108.html
* Servo motor x 1 (ready for use)
* Bluno Bee - Turn Arduino to a Bluetooth 4.0 (BLE) Ready Board x 2: $20 https://www.dfrobot.com/product-1073.html
* Gravity: IO Expansion Shield for Arduino V7.1 x 2: $20 https://www.dfrobot.com/product-1009.html
* Battery Holder 4xAA Barrel Connector for Arduino x 2: $10
* AA Battery(16): $14
* Piezo Buzzer x 2 (ready for use)
* Jumper Wires (ready for use)

Schedule
---------------------------------

.. image:: https://github.com/dotranquochung/Room-Population-Controller/blob/main/plan.png

**Note:** The schedule is only an estimate and subjected to change. It depends on whether we will be able to successfully deliver the first and second task. The third and the fourth task are predicted to be hard and we assume we will start early. Also, we will split work, and this is not shown in the schedule.
